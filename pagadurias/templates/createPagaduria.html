{% extends 'base.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="mt-5 h-full bg-white min-h-[500px] rounded-xl shadow-lg font-sans mx-auto border-2 border-b-gray-400">
    <!-- <h2 class="text-md font-extrabold text-blue-900 mb-8 text-end">‚ûï Nueva Pagadur√≠a</h2> -->

    <div class="flex flex-row gap-4 justify-between">
        <h3 class="text-sm font-bold text-gray-700 py-2 text-center select-section">üè¢ Datos Generales de la Pagaduria</h3>
        <h3 class="text-sm font-bold text-gray-700 py-2 text-center">üè¢ Ubicaci√≥n de la Pagaduria</h3>
        <h3 class="text-sm font-bold text-gray-700 py-2 text-center">üë• Datos de los Empleados</h3>
        <h3 class="text-sm font-bold text-gray-700 py-2 text-center">üë§ Representante Legal</h3>
        <h3 class="text-sm font-bold text-gray-700 py-2 text-center">üë§ Encargado Visacion</h3>
        <h3 class="text-sm font-bold text-gray-700 py-2 text-center">üë§ Encargado Envios</h3>
    </div>

    <form method="POST" id="multiStepForm" class="h-[440px] p-4 bg-slate-100/50 border-x-2 border-gray-400">
        {% csrf_token %}

        <!-- Secci√≥n 1: Datos de la Empresa -->
        <div class="form-step h-full flex flex-col justify-between items-stretch">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col mt-5 relative">
                    {{ form.nombre|add_class:"peer input-field placeholder-transparent" }}
                    {{ form.nombre.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.razonSocial|add_class:"peer input-field" }}
                    {{ form.razonSocial.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.sigla|add_class:"peer input-field" }}
                    {{ form.sigla.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.nit|add_class:"peer input-field" }}
                    {{ form.nit.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.tipoEmpresa|add_class:"peer input-field" }}
                    {{ form.tipoEmpresa.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.actividadEconomica|add_class:"peer input-field" }}
                    {{ form.actividadEconomica.label_tag|safe }}
                </div>
            </div>
            <div class="flex justify-end mt-6">
                <button type="button" class="next-btn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 2: Ubicacion Pagaduria -->
        <div class="form-step hidden h-full flex-col justify-between items-stretch">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col mt-5 relative">
                    {{ form.pais|add_class:"peer input-field" }}
                    {{ form.pais.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.departamento|add_class:"peer input-field" }}
                    {{ form.departamento.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.ciudad|add_class:"peer input-field" }}
                    {{ form.ciudad.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.direccion|add_class:"peer input-field" }}
                    {{ form.direccion.label_tag|safe }}
                </div>
            </div>
            <div class="flex justify-between mt-6">
                <button type="button" class="prev-btn">‚¨ÖÔ∏è Anterior</button>
                <button type="button" class="next-btn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 3: Datos de Empleados -->
        <div class="form-step hidden h-full flex-col justify-between items-stretch">
            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                <div class="flex flex-col mt-5 relative">
                    {{ form.totalEmpleados|add_class:"peer input-field" }}
                    {{ form.totalEmpleados.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosIndefinidos|add_class:"peer input-field" }}
                    {{ form.empleadosIndefinidos.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosFijo|add_class:"peer input-field" }}
                    {{ form.empleadosFijo.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosObraLabor|add_class:"peer input-field" }}
                    {{ form.empleadosObraLabor.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosOtros|add_class:"peer input-field" }}
                    {{ form.empleadosOtros.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosSalario1y2|add_class:"peer input-field" }}
                    {{ form.empleadosSalario1y2.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosSalario2y4|add_class:"peer input-field" }}
                    {{ form.empleadosSalario2y4.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.empleadosSalariomax4|add_class:"peer input-field" }}
                    {{ form.empleadosSalariomax4.label_tag|safe }}
                </div>
            </div>
            <div class="flex justify-between mt-6">
                <button type="button" class="prev-btn">‚¨ÖÔ∏è Anterior</button>
                <button type="button" class="next-btn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 4: Datos del Representante -->
        <div class="form-step hidden h-full flex-col justify-between items-stretch">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col mt-5 relative">
                    {{ form.nombreRepresentante|add_class:"peer input-field" }}
                    {{ form.nombreRepresentante.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.cedulaRepresentante|add_class:"peer input-field" }}
                    {{ form.cedulaRepresentante.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.correoRepresentante|add_class:"peer input-field" }}
                    {{ form.correoRepresentante.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.telefono|add_class:"peer input-field" }}
                    {{ form.telefono.label_tag|safe }}
                </div>
            </div>
            <div class="flex justify-between mt-6">
                <button type="button" class="prev-btn">‚¨ÖÔ∏è Anterior</button>
                <button type="button" class="next-btn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 5: Datos Pagaduria Visacion -->
        <div class="form-step hidden h-full flex-col justify-between items-stretch">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoVisacionNombre|add_class:"peer input-field" }}
                    {{ form.encargadoVisacionNombre.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoVisacionCargo|add_class:"peer input-field" }}
                    {{ form.encargadoVisacionCargo.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoVisacionCorreo|add_class:"peer input-field" }}
                    {{ form.encargadoVisacionCorreo.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoVisacionTelefono|add_class:"peer input-field" }}
                    {{ form.encargadoVisacionTelefono.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoVisacionDireccion|add_class:"peer input-field" }}
                    {{ form.encargadoVisacionDireccion.label_tag|safe }}
                </div>
            </div>
            <div class="flex justify-between mt-6">
                <button type="button" class="prev-btn">‚¨ÖÔ∏è Anterior</button>
                <button type="button" class="next-btn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 6: Datos Pagaduria Envios -->
        <div class="form-step hidden h-full flex-col justify-between items-stretch">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoEnvioCuentaNombre|add_class:"peer input-field" }}
                    {{ form.encargadoEnvioCuentaNombre.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoEnvioCuentaCargo|add_class:"peer input-field" }}
                    {{ form.encargadoEnvioCuentaCargo.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoEnvioCuentaCorreo|add_class:"peer input-field" }}
                    {{ form.encargadoEnvioCuentaCorreo.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoEnvioCuentaTelefono|add_class:"peer input-field" }}
                    {{ form.encargadoEnvioCuentaTelefono.label_tag|safe }}
                </div>
                <div class="flex flex-col mt-5 relative">
                    {{ form.encargadoEnvioCuentaDireccion|add_class:"peer input-field" }}
                    {{ form.encargadoEnvioCuentaDireccion.label_tag|safe }}
                </div>
            </div>
            <div class="flex justify-between mt-6">
                <button type="button" class="prev-btn">‚¨ÖÔ∏è Anterior</button>
                <button type="button" class="next-btn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n Final: Confirmaci√≥n -->
        <div class="form-step hidden h-full flex-col justify-between items-stretch">
            <h3 class="text-xl font-bold text-gray-700 mb-4">‚úÖ Confirmar Datos</h3>
            <p class="text-gray-600">Verifica que toda la informaci√≥n es correcta antes de enviar.</p>
            <div class="flex justify-between mt-6">
                <button type="button" class="prev-btn">‚¨ÖÔ∏è Anterior</button>
                <button type="submit" class="submit-btn">‚úÖ Crear Pagadur√≠a</button>
            </div>
        </div>
    </form>
</div>

<!-- JavaScript para manejar el formulario paso a paso -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const steps = document.querySelectorAll(".form-step");
        let currentStep = 0;

        function showStep(step) {
            steps.forEach((el, index) => {
                el.classList.toggle("hidden", index !== step);
                el.classList.toggle("flex", index === step);
            });
        }

        document.querySelectorAll(".next-btn").forEach((btn) => {
            btn.addEventListener("click", function () {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
            });
        });

        document.querySelectorAll(".prev-btn").forEach((btn) => {
            btn.addEventListener("click", function () {
                if (currentStep > 0) {
                    currentStep--;
                    showStep(currentStep);
                }
            });
        });

        showStep(currentStep);
    });
</script>
{% endblock %}